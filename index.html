<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>TOP 25</title>
<link href="https://fonts.googleapis.com/css2?family=Mitr:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="icon" type="image/png" href="logo.png">
  
<style>
:root {
  --accent: #ffd400;
  --bg: #05245a;
}
body {
  margin: 0;
  font-family: "Mitr", sans-serif;
  background: linear-gradient(180deg, #04214a, #072e5c);
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}
.stage {
  background: rgba(255,255,255,0.05);
  padding: 24px;
  border-radius: 18px;
  border: 5px solid var(--accent);
  max-width: 900px;
  width: 95%;
}

/* ‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° */
#introScreen {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: #001537;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 3000;
  transition: opacity 0.8s ease;
}
#introImage {
  max-width: 80%;
  height: auto;
  border-radius: 18px;
  box-shadow: 0 0 20px rgba(255,255,255,0.2);
  margin-bottom: 20px;
}
#startGameBtn {
  font-family: "Mitr", sans-serif;
  font-size: 20px;
  font-weight: 600;
  background: var(--accent);
  color: #05245a;
  border: none;
  border-radius: 12px;
  padding: 12px 24px;
  cursor: pointer;
  transition: all 0.3s ease;
}
#startGameBtn:hover {
  transform: scale(1.05);
  background: #ffe55e;
}

h1 {
  text-align: center;
  color: var(--accent);
  font-weight: 600;
  margin-bottom: 15px;
}
textarea, input[type=text] {
  width: 100%;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.2);
  background: rgba(0,0,0,0.2);
  color: #fff;
  padding: 10px;
  font-size: 16px;
  font-family: "Mitr", sans-serif;
  box-sizing: border-box;
}
textarea { height: 150px; }
input.duplicate {
  border: 2px solid #ff6060;
  background: rgba(255,50,50,0.1);
}
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px,1fr));
  gap: 12px;
  margin-top: 12px;
}
label { font-size: 15px; color: #ffd400; }
button {
  font-family: "Mitr", sans-serif;
  background: var(--accent);
  border: 0;
  padding: 10px 16px;
  border-radius: 10px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  color: #05245a;
  transition: transform 0.1s ease;
}
button:hover { opacity: 0.9; transform: scale(1.02); }
.smallButtons { display: flex; gap: 6px; }
.smallButtons button { font-size: 13px; padding: 6px 10px; border-radius: 6px; }
#loading, #loadingSet {
  display: none;
  text-align: center;
  font-size: 20px;
  color: var(--accent);
  animation: blink 1s infinite;
  margin-top: 12px;
}
@keyframes blink { 0%,100%{opacity:1;}50%{opacity:0.5;} }
#duplicateMsg {
  color:#ff6060;font-size:14px;margin-top:10px;
  display:none;text-align:center;
}
#alertMsg {
  color:#ff6060;
  font-size:15px;
  margin-top:15px;
  display:none;
  text-align:left;
  white-space:pre-line;
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.1);
  padding:10px;
  border-radius:8px;
}
#nextBtn { display:block;margin:30px auto 0; }
#questionDesc {
  font-size:42px;margin-bottom:12px;color:#ffd400;text-align:center;
}
#footer { text-align:center;color:#ccc;margin-top:20px;font-size:13px; }

/* ‡∏ï‡∏±‡∏ß‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ */
.timerBox {
  border:2px solid var(--accent);
  border-radius:10px;
  padding:10px;
  margin:15px 0;
  text-align:center;
  background:rgba(255,255,255,0.05);
}
.timerDisplay {
  font-size:28px;
  color:var(--accent);
  font-weight:700;
}
.timerLabel {
  color:#fff;
  font-size:18px;
  margin-bottom:8px;
}
#timeUpOverlay {
  display:none;
  position:fixed;
  top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.85);
  color:#ffd400;
  font-size:60px;
  font-weight:700;
  justify-content:center;
  align-items:center;
  text-align:center;
  z-index:1000;
  animation: fadeIn 0.3s ease;
}
@keyframes fadeIn { from{opacity:0;}to{opacity:1;} }

</style>
</head>
<body>

<!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° -->
<div id="introScreen">
  <img src="TOP 25.jpg" alt="TOP 25" id="introImage">
  <button id="startGameBtn">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
</div>

<div id="timeUpOverlay">‚è∞ ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤!</div>

<div class="stage">
  <h1>üß† TOP 25</h1>
  <div style="text-align:center;margin-bottom:15px;">
    <button id="explainBtn">üìò ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏Å‡∏°</button>
<!-- üîπ Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏†‡∏≤‡∏û‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏Å‡∏° -->
<div id="explainModal" class="modal">
  <span class="close">&times;</span>
  <img class="modal-content" id="explainImage" src="tick.jpg" alt="‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏Å‡∏°">
</div>

<style>
/* ‡∏õ‡∏∏‡πà‡∏° */
#explainBtn {
  background: #ffd400;
  color: #000000;
  border: none;
  border-radius: 10px;
  padding: 10px 22px;
  font-size: 17px;
  font-weight: 600;
  cursor: pointer;
  margin: 8px;
  transition: 0.3s;
}
#explainBtn:hover { transform: scale(1.05); }

/* Modal */
.modal {
  display: none;
  position: fixed;
  z-index: 2000;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background-color: rgba(0,0,0,0.85);
  justify-content: center;
  align-items: center;
}
.modal-content {
  max-width: 90%;
  max-height: 90%;
  border-radius: 12px;
  box-shadow: 0 0 15px #000;
}
.close {
  position: absolute;
  top: 30px;
  right: 50px;
  color: #fff;
  font-size: 40px;
  font-weight: bold;
  cursor: pointer;
}
.close:hover { color: #ff4444; }
</style>

<script>
const explainBtn = document.getElementById('explainBtn');
const explainModal = document.getElementById('explainModal');
const closeBtn = document.querySelector('.close');

explainBtn.onclick = () => {
  explainModal.style.display = 'flex';
};

closeBtn.onclick = () => {
  explainModal.style.display = 'none';
};

window.onclick = (e) => {
  if (e.target === explainModal) {
    explainModal.style.display = 'none';
  }
};
</script>
    <button onclick="loadSet(0)">üìù ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á</button>
    <button onclick="loadSet(1)">üì¶ ‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà 1</button>
    <button onclick="loadSet(2)">üëß ‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà 2</button>
    <button onclick="loadSet(3)">üèÖ ‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà 3</button>
    <button onclick="loadSet(4)">üçå ‡∏ä‡∏∏‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</button>
  </div>

  <div id="questionDesc"></div>
  <input id="customQuestion" type="text" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..." style="display:none;font-size:20px;margin-bottom:10px;">
  <div id="loadingSet">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡∏∏‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°...</div>

  <label>‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 25 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö (‡πÉ‡∏™‡πà‡∏ó‡∏µ‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î):</label>
  <textarea id="ranks" placeholder="‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà 1 ‡∏ñ‡∏∂‡∏á 25..."></textarea>

  <div id="toggleRanks" style="display:inline-block;margin-top:10px;border:2px solid var(--accent);padding:5px 10px;border-radius:8px;cursor:pointer;">üîí ‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏â‡∏•‡∏¢</div>

  <div class="timerBox">
    <div class="timerLabel">üïê ‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏¥‡∏î‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</div>
    <div class="timerDisplay" id="timerDisplay">30</div>
    <div style="margin-top:8px;">
      <button id="startTimerBtn">‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°</button>
      <button id="resetTimerBtn">‚èπ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏ß‡∏•‡∏≤</button>
    </div>
  </div>

  <div id="answersArea">
    <div class="headerRow" style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px;">
      <h2 style="color:var(--accent);margin:0;">‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≤‡∏á ‡πÜ</h2>
      <div class="smallButtons">
        <button id="randomOrderBtn">üé≤ ‡∏™‡∏∏‡πà‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö</button>
        <button id="resetOrderBtn">‚ôªÔ∏è ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
      </div>
    </div>

    <div id="loading">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>
    <div class="grid" id="answersGrid"></div>
    <div id="duplicateMsg">‚ö†Ô∏è ‡∏û‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ã‡πâ‡∏≥ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô</div>
    <div id="alertMsg"></div>
  </div>

  <button id="nextBtn">‚û°Ô∏è ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (‡πÄ‡∏â‡∏•‡∏¢)</button>
  <div id="footer">v3.3 | THP</div>
</div>

<script>
/* ---------- Intro Screen ---------- */
const introScreen=document.getElementById("introScreen");
const stage=document.querySelector(".stage");
const startGameBtn=document.getElementById("startGameBtn");
stage.style.display="none";
startGameBtn.addEventListener("click",()=>{
  introScreen.style.opacity="0";
  setTimeout(()=>{introScreen.style.display="none";stage.style.display="block";},800);
});

/* ---------- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡∏∏‡∏î ---------- */
const sets=[
  {question:"",data:""},
  {question:"25 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏¥‡∏¢‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÑ‡∏ó‡∏¢",data:`‡∏™‡∏∏‡∏ô‡∏±‡∏Ç\n‡πÅ‡∏°‡∏ß\n‡∏õ‡∏•‡∏≤‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°\n‡∏Å‡∏£‡∏∞‡∏ï‡πà‡∏≤‡∏¢\n‡∏ô‡∏Å\n‡πÄ‡∏ï‡πà‡∏≤\n‡∏´‡∏ô‡∏π‡πÅ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå\n‡∏ä‡∏π‡∏Å‡πâ‡∏≤‡πÑ‡∏Å‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå\n‡πÄ‡∏°‡πà‡∏ô‡πÅ‡∏Ñ‡∏£‡∏∞\n‡∏á‡∏π\n‡∏´‡∏ô‡∏π‡πÅ‡∏Å‡∏™‡∏ö‡∏µ‡πâ\n‡∏Å‡∏¥‡πâ‡∏á‡∏Å‡πà‡∏≤\n‡∏ä‡∏¥‡∏ô‡∏ä‡∏¥‡∏•‡πà‡∏≤\n‡∏Å‡∏∏‡πâ‡∏á\n‡πÄ‡∏ü‡∏≠‡πÄ‡∏£‡∏ó\n‡∏Å‡∏ö\n‡πÅ‡∏°‡∏•‡∏á\n‡∏°‡πâ‡∏≤\n‡πÑ‡∏Å‡πà\n‡πÅ‡∏Å‡∏∞\n‡πÅ‡∏°‡∏á‡∏°‡∏∏‡∏°\n‡∏´‡∏≠‡∏¢‡∏ó‡∏≤‡∏Å\n‡πÄ‡∏õ‡πá‡∏î\n‡∏•‡∏¥‡∏á\n‡∏õ‡∏π`},
  {question:"25 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏•‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÑ‡∏ó‡∏¢",data:`‡πÄ‡∏°‡∏¢‡πå\n‡∏û‡∏•‡∏≠‡∏¢\n‡∏°‡∏≤‡∏¢‡∏î‡πå\n‡πÑ‡∏≠‡∏ã‡πå\n‡πÅ‡∏ô‡∏ô\n‡∏°‡∏¥‡πâ‡∏ô‡∏ó‡πå\n‡∏°‡∏∏‡∏Å\n‡πÄ‡∏ü‡∏¥‡∏£‡πå‡∏ô\n‡∏≠‡∏≠‡∏°\n‡∏ô‡πâ‡∏≥\n‡∏ô‡∏¥‡∏ß\n‡πÄ‡∏ô‡∏¢\n‡πÅ‡∏≠‡∏ô\n‡πÄ‡∏Å‡∏î\n‡πÅ‡∏Å‡πâ‡∏°\n‡∏õ‡∏•‡∏≤\n‡πÇ‡∏ö‡∏ß‡πå\n‡∏î‡∏≤‡∏ß\n‡∏≠‡∏≤‡∏¢\n‡∏õ‡∏∏‡πâ‡∏¢\n‡∏Å‡∏¥‡πä‡∏ü\n‡∏ù‡∏ô\n‡πÄ‡∏≠‡πã\n‡∏≠‡πâ‡∏≠‡∏°\n‡∏ô‡∏∏‡πà‡∏ô`},
  {question:"25 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Å‡∏µ‡∏¨‡∏≤‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢",data:`‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•\n‡∏ß‡∏≠‡∏•‡πÄ‡∏•‡∏¢‡πå‡∏ö‡∏≠‡∏•\n‡πÅ‡∏ö‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏±‡∏ô\n‡∏°‡∏ß‡∏¢‡πÑ‡∏ó‡∏¢\n‡∏ö‡∏≤‡∏™‡πÄ‡∏Å‡∏ï‡∏ö‡∏≠‡∏•\n‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥\n‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô\n‡πÄ‡∏ó‡∏ô‡∏ô‡∏¥‡∏™\n‡∏≠‡∏µ‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï\n‡∏õ‡∏¥‡∏á‡∏õ‡∏≠‡∏á\n‡∏Å‡∏£‡∏µ‡∏ë‡∏≤\n‡∏ß‡∏¥‡πà‡∏á\n‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≠\n‡∏Å‡∏≠‡∏•‡πå‡∏ü\n‡∏ü‡∏∏‡∏ï‡∏ã‡∏≠‡∏•\n‡∏¢‡∏Å‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å\n‡∏¢‡∏¥‡∏°‡∏ô‡∏≤‡∏™‡∏ï‡∏¥‡∏Å\n‡πÇ‡∏ö‡∏ß‡πå‡∏•‡∏¥‡πà‡∏á\n‡∏™‡∏ô‡∏∏‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå\n‡πÄ‡∏ó‡∏Ñ‡∏ß‡∏±‡∏ô‡πÇ‡∏î\n‡πÅ‡∏Ç‡πà‡∏á‡∏£‡∏ñ\n‡∏¢‡∏¥‡∏á‡∏õ‡∏∑‡∏ô\n‡πÄ‡∏õ‡∏ï‡∏≠‡∏á\n‡∏Ñ‡∏≤‡∏£‡∏≤‡πÄ‡∏ï‡πâ\n‡πÄ‡∏£‡∏∑‡∏≠‡πÉ‡∏ö`},
  {question:"25 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢",data:`‡∏Å‡∏•‡πâ‡∏ß‡∏¢\n‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡∏•\n‡∏™‡πâ‡∏°\n‡πÅ‡∏ï‡∏á‡πÇ‡∏°\n‡∏≠‡∏á‡∏∏‡πà‡∏ô\n‡∏°‡∏∞‡∏°‡πà‡∏ß‡∏á\n‡∏™‡∏ï‡∏£‡∏≠‡∏ß‡πå‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ\n‡∏™‡∏±‡∏ö‡∏õ‡∏∞‡∏£‡∏î\n‡∏°‡∏∞‡∏•‡∏∞‡∏Å‡∏≠\n‡∏Å‡∏µ‡∏ß‡∏µ\n‡πÄ‡∏ä‡∏≠‡∏£‡πå‡∏£‡∏µ\n‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß\n‡πÅ‡∏Ñ‡∏ô‡∏ï‡∏≤‡∏•‡∏π‡∏õ\n‡πÄ‡∏á‡∏≤‡∏∞\n‡∏°‡∏±‡∏á‡∏Ñ‡∏∏‡∏î\n‡∏•‡∏π‡∏Å‡πÅ‡∏û‡∏£‡πå\n‡∏ù‡∏£‡∏±‡πà‡∏á\n‡∏ö‡∏•‡∏π‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏µ\n‡πÄ‡∏™‡∏≤‡∏ß‡∏£‡∏™\n‡∏ó‡∏±‡∏ö‡∏ó‡∏¥‡∏°\n‡∏•‡∏π‡∏Å‡∏û‡∏µ‡∏ä\n‡∏≠‡∏∞‡πÇ‡∏ß‡∏Ñ‡∏≤‡πÇ‡∏î\n‡∏û‡∏•‡∏±‡∏ö\n‡∏ó‡∏∏‡πÄ‡∏£‡∏µ‡∏¢‡∏ô\n‡∏•‡∏≥‡πÑ‡∏¢`}
];

/* ---------- ‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° ---------- */
const grid=document.getElementById("answersGrid");
const ranksArea=document.getElementById("ranks");
const toggleRanks=document.getElementById("toggleRanks");
const questionDesc=document.getElementById("questionDesc");
const customQuestion=document.getElementById("customQuestion");
const duplicateMsg=document.getElementById("duplicateMsg");
const alertMsg=document.getElementById("alertMsg");
const loadingSet=document.getElementById("loadingSet");
let hidden=false;

function loadSet(i){
  questionDesc.style.display="none";
  ranksArea.style.display="none";
  customQuestion.style.display="none";
  loadingSet.style.display="block";
  setTimeout(()=>{
    loadingSet.style.display="none";
    const set=sets[i];
    if(i===0){
      customQuestion.style.display="block";
      ranksArea.value="";
      ranksArea.style.display="block";
      hidden=false;
    }else{
      customQuestion.style.display="none";
      questionDesc.textContent=set.question;
      questionDesc.style.display="block";
      ranksArea.value=set.data;
      ranksArea.style.display="none";
      hidden=true;
    }
    updateToggleText();
    localStorage.setItem("selectedSet", i); // ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ß‡πâ
  },800);
}
function updateToggleText(){
  toggleRanks.textContent=hidden?"üîì ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏•‡∏¢":"üîí ‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏â‡∏•‡∏¢";
}
toggleRanks.addEventListener("click",()=>{hidden=!hidden;ranksArea.style.display=hidden?"none":"block";updateToggleText();});

function simulateLoading(callback){
  grid.style.opacity="0";grid.style.pointerEvents="none";
  document.getElementById("loading").style.display="block";
  setTimeout(()=>{
    document.getElementById("loading").style.display="none";
    callback();
    grid.style.opacity="1";grid.style.pointerEvents="auto";
  },1000);
}
document.getElementById("randomOrderBtn").addEventListener("click",()=>simulateLoading(shuffleGroups));
document.getElementById("resetOrderBtn").addEventListener("click",()=>simulateLoading(resetGroups));
function resetGroups(){
  grid.innerHTML="";
  for(let i=1;i<=18;i++){
    const div=document.createElement("div");
    div.innerHTML=`<label>‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà ${i}</label><input id="ans${i}" type="text" placeholder="‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏° ${i}">`;
    grid.appendChild(div);
  }
  attachDuplicateCheck();
}
function shuffleGroups(){
  const items=[...grid.children];
  for(let i=items.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    grid.appendChild(items[j]);
  }
}
function attachDuplicateCheck(){
  const inputs=grid.querySelectorAll("input");
  inputs.forEach(inp=>{
    inp.addEventListener("input",()=>{
      const values=[...inputs].map(i=>i.value.trim().toLowerCase()).filter(Boolean);
      const dup=values.filter((v,i,a)=>a.indexOf(v)!==i);
      let any=false;
      inputs.forEach(i=>{
        if(dup.includes(i.value.trim().toLowerCase())){i.classList.add("duplicate");any=true;}
        else i.classList.remove("duplicate");
      });
      duplicateMsg.style.display=any?"block":"none";
    });
  });
}

/* ---------- ‡∏ï‡∏±‡∏ß‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ ---------- */
const timerDisplay=document.getElementById("timerDisplay");
const startBtn=document.getElementById("startTimerBtn");
const resetBtn=document.getElementById("resetTimerBtn");
const overlay=document.getElementById("timeUpOverlay");
let timer=null,timeLeft=30;

function playBeep(){
  const ctx=new (window.AudioContext||window.webkitAudioContext)();
  const osc=ctx.createOscillator();
  const gain=ctx.createGain();
  osc.connect(gain);gain.connect(ctx.destination);
  osc.type="sine";osc.frequency.value=880;
  gain.gain.setValueAtTime(0.2,ctx.currentTime);
  osc.start();osc.stop(ctx.currentTime+0.2);
}
function playAlarm(){
  const ctx=new (window.AudioContext||window.webkitAudioContext)();
  const osc=ctx.createOscillator();
  const gain=ctx.createGain();
  osc.connect(gain);gain.connect(ctx.destination);
  osc.type="square";
  gain.gain.setValueAtTime(0.2,ctx.currentTime);
  for(let i=0;i<6;i++){
    osc.frequency.setValueAtTime(i%2?440:660,ctx.currentTime+i*0.25);
  }
  osc.start();osc.stop(ctx.currentTime+3);
}
function showTimeUp(){
  overlay.style.display="flex";
  playAlarm();
  setTimeout(()=>overlay.style.display="none",3000);
}
function startTimer(){
  clearInterval(timer);
  overlay.style.display="none";
  timeLeft=30;
  timerDisplay.textContent=timeLeft;
  timer=setInterval(()=>{
    timeLeft--;
    timerDisplay.textContent=timeLeft;
    if(timeLeft<=5 && timeLeft>0) playBeep();
    if(timeLeft<=0){
      clearInterval(timer);
      timerDisplay.textContent="‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤!";
      showTimeUp();
    }
  },1000);
}
function resetTimer(){
  clearInterval(timer);
  overlay.style.display="none";
  timeLeft=30;
  timerDisplay.textContent=timeLeft;
}
startBtn.addEventListener("click",startTimer);
resetBtn.addEventListener("click",resetTimer);

/* ---------- ‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏â‡∏•‡∏¢ ---------- */
document.getElementById("nextBtn").addEventListener("click",()=>{
  alertMsg.style.display="none";
  alertMsg.textContent="";

  const answers=[];
  for(let i=1;i<=18;i++){
    const val=document.getElementById(`ans${i}`).value.trim();
    if(val) answers.push(val); // ‚úÖ ‡∏ô‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏Å
  }

  const question=customQuestion.value.trim()||questionDesc.textContent.trim();
  const ranks=ranksArea.value.trim();
  const errors=[];
  if(answers.length === 0)
    errors.push("‚ö†Ô∏è ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö");
  if(!question) errors.push("‚ö†Ô∏è ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°");
  if(!ranks) errors.push("‚ö†Ô∏è ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 25 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö");

  const lower=answers.map(v=>v.toLowerCase());
  const dup=lower.filter((v,i,a)=>a.indexOf(v)!==i);
  if(dup.length>0) errors.push(`‚ö†Ô∏è ‡∏û‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ã‡πâ‡∏≥: ${[...new Set(dup)].join(", ")}`);

  if(errors.length>0){
    alertMsg.style.display="block";
    alertMsg.textContent=errors.join("\n");
    return;
  }

  localStorage.setItem("answers",JSON.stringify(answers));
  localStorage.setItem("question",question);
  localStorage.setItem("ranks",ranks);
  window.location.href="result.html";
});

/* ---------- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ---------- */
resetGroups();
loadSet(0); // ‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏ä‡∏∏‡∏î‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤

</script>
</body>
</html>


